local AureKillModule = {}

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

local auraEnabled = false
local auraRadius = 45
local damageAmount = 50

local npcFolders = {
	Workspace:FindFirstChild("Zombies"),
	Workspace:FindFirstChild("NightEnemies"),
	Workspace:FindFirstChild("Animals")
}

local function isPlayerModel(model)
	for _, player in ipairs(Players:GetPlayers()) do
		if player.Character == model then
			return true
		end
	end
	return false
end

local function startAura()
	auraEnabled = true
	task.spawn(function()
		while auraEnabled do
			local character = LocalPlayer.Character
			if character and character:FindFirstChild("HumanoidRootPart") then
				local root = character.HumanoidRootPart

				for _, folder in ipairs(npcFolders) do
					if folder then
						for _, model in ipairs(folder:GetChildren()) do
							if model:IsA("Model") and model:FindFirstChild("Humanoid") and model:FindFirstChild("HumanoidRootPart") and not isPlayerModel(model) then
								local humanoid = model.Humanoid
								local dist = (model.HumanoidRootPart.Position - root.Position).Magnitude
								if dist <= auraRadius and humanoid.Health > 0 then
									humanoid:TakeDamage(damageAmount)
								end
							end
						end
					end
				end
			end
			task.wait(0.5)
		end
	end)
end

local function stopAura()
	auraEnabled = false
end

function AureKillModule.toggleAura(state)
	if state then
		startAura()
	else
		stopAura()
	end
end

return AureKillModule
